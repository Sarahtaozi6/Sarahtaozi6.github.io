/* ——— Modern Light UI: clean typography, soft surfaces, gentle shadows ——— */
:root{
    --bg:#f7f9fc;        /* page bg */
    --surface:#ffffff;   /* card/header */
    --ink:#0f172a;       /* main text */
    --muted:#667085;     /* secondary text */
    --accent:#2563eb;    /* brand blue */
    --accent-2:#3b82f6;  /* gradient end */
    --edge:#e6eaf2;      /* borders */
    --soft:#f1f5fb;      /* soft bg */
    --ok:#10b981;
    --bad:#ef4444;
    --ring: rgba(37,99,235,.25);

    /* Navbar height (keep header + body padding in sync) */
    --nav-h: 73px;
    --header-h: 72px;
}

*{box-sizing:border-box}
html,body{height:100%}
body{
    margin:0;
    padding-top: var(--nav-h); /* 留出固定导航的空间 */
    background:
            radial-gradient(65% 120% at -10% -30%, rgba(37,99,235,.06), transparent 60%),
            radial-gradient(55% 90%  at 110% -10%, rgba(99,102,241,.05), transparent 60%),
            var(--bg);
    color:var(--ink);
    -webkit-font-smoothing:antialiased;
    font: 16px/1.75 ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "PingFang SC","Microsoft YaHei", Arial;
}

.container{max-width:1100px;margin:0 auto;padding:0 16px}

/* ===== Header / Navbar ===== */
header{
    position: fixed;
    top:0; left:0; right:0;
    height: var(--nav-h);
    z-index: 1000;
    display: flex;
    align-items: center;
    backdrop-filter: saturate(140%) blur(8px);
    background: color-mix(in oklab, var(--surface) 92%, transparent);
    border-bottom:1px solid var(--edge);
}

nav{
    width:100%;
    height: 100%;
    display:flex;
    align-items:center;
    justify-content:flex-start;
    gap:50px;
    /* 关键：不换行，强制在同一行 */
    flex-wrap: nowrap;
}

/* 标题 */
nav .brand{
    font-weight:800; letter-spacing:.2px;
    font-size: 1.5rem; line-height:1;
    white-space:nowrap;
    background: linear-gradient(90deg,var(--accent),var(--accent-2));
    -webkit-background-clip:text; background-clip:text; -webkit-text-fill-color:transparent;
    margin-left:0;
}

/* 让所有带 id 的目标（包括 <li id="r1"> 之类）预留顶部间距 */
[id] { scroll-margin-top: calc(var(--header-h) + 12px); }

/* 可选：启用平滑滚动 */
html { scroll-behavior: smooth; }



/* 链接区域 */
nav .links{
    display:flex; align-items:center; gap:18px;
    flex-wrap: nowrap;  /* 也不允许换行 */
}

nav .links a{
    display:inline-flex; align-items:center; justify-content:center;
    padding: 6px 10px;
    border-radius:10px;
    color:var(--ink);
    text-decoration:none;
    font-weight:500;
    transition: background .18s ease, color .18s ease, box-shadow .18s ease;
}

nav .links a:hover{
    background: var(--soft);
    color: var(--accent);
}

nav .links a.active{
    background: var(--soft);
    color: var(--accent);
    box-shadow: 0 0 0 0 rgba(0,0,0,0);
}

/* ===== Sections / Headings ===== */
main section{scroll-margin-top: calc(var(--nav-h) + 8px); padding:56px 0; border-bottom:0 !important;}
h1,h2{line-height:1.2; margin:.2em 0 .5em}
h1{font-size:clamp(28px,3.6vw,40px); letter-spacing:-.02em}
h2{font-size:clamp(22px,2.6vw,28px); letter-spacing:-.01em}
p{color:#334155}

/* Layout utilities */
.grid{display:grid; gap:20px}
.cols-2{grid-template-columns:repeat(auto-fit,minmax(280px,1fr))}

/* ===== Cards ===== */
.card{
    background:var(--surface);
    border:1px solid var(--edge);
    border-radius:16px;
    padding:18px;
    box-shadow:0 1px 2px rgba(15,23,42,.04), 0 8px 24px rgba(15,23,42,.06);
    transition: transform .18s ease, box-shadow .18s ease;
}
.card:hover{
    transform: translateY(-2px);
    box-shadow:0 2px 8px rgba(15,23,42,.06), 0 16px 32px rgba(15,23,42,.08);
}

.caption,.legend,.small{font-size:13px; color:var(--muted)}
a.ref{color:var(--accent); text-decoration:underline dotted}

/* ===== Pills / Chips / Buttons ===== */
.pill, .kpi .chip{
    display:inline-block; padding:6px 10px; border-radius:999px;
    background:var(--soft); border:1px solid var(--edge); color:var(--muted); font-size:12px;
}
.kpi{display:flex; gap:10px; flex-wrap:wrap}
.btn{
    display:inline-block; padding:10px 14px; border-radius:10px; border:0; cursor:pointer;
    color:#fff; background:linear-gradient(90deg,var(--accent),var(--accent-2));
    box-shadow:0 6px 16px rgba(37,99,235,.25); transition:transform .15s ease, box-shadow .15s ease;
}
.btn:hover{transform:translateY(-1px); box-shadow:0 8px 22px rgba(37,99,235,.3)}
.btn:disabled{opacity:.6; cursor:not-allowed}

/* ===== Media blocks ===== */
.img{
    width:100%; height:240px; border-radius:14px;
    background:#eef2ff url('../img/placeholder-1.jpg') center/cover no-repeat;
    border:1px solid var(--edge);
}
.img.alt2{background-image:url('../img/placeholder-2.jpg')}
.img.alt3{background-image:url('../img/placeholder-3.jpg')}
.img.alt4{background-image:url('../img/placeholder-4.jpg')}
.img.alt5{background-image:url('../img/placeholder-5.jpg')}

/* ===== Code / Tables ===== */
pre{
    overflow:auto; background:#fbfdff; border:1px solid var(--edge); padding:16px; border-radius:12px;
    box-shadow: inset 0 1px 0 #fff;
}
code{font-family:ui-monospace, Menlo, Consolas, monospace; font-size:13px}

.table{width:100%; border-collapse:separate; border-spacing:0}
.table thead th{
    font-weight:700; color:#1f2937; background: linear-gradient(#fff,#fbfbff);
    border-bottom:2px solid var(--edge); padding:12px 10px;
    position: sticky; top: calc(var(--nav-h) + 8px); /* 粘性表头避开导航 */
    z-index: 1;
}
.table td{border-bottom:1px solid var(--edge); padding:12px 10px}
.table tbody tr:nth-child(even){background:#fafcff}

/* ===== Audio row ===== */
.audio-row{
    display:flex; gap:12px; align-items:center; margin:.75rem 0;
    color:var(--muted);
    padding:10px; border:1px dashed var(--edge); border-radius:12px; background:var(--soft);
}

/* ===== Quiz ===== */
.quiz{display:grid; gap:12px; margin-top:14px}
.quiz .option{
    padding:12px; background:#fff; border:1px solid var(--edge); border-radius:12px; cursor:pointer;
    transition:border-color .15s ease, box-shadow .15s ease, transform .05s ease;
}
.quiz .option:hover{
    border-color:var(--accent);
    box-shadow:0 0 0 4px var(--ring);
}
.quiz .option:active{transform:scale(.995)}
.quiz .option.correct{outline:2px solid var(--ok)}
.quiz .option.wrong{outline:2px solid var(--bad)}

/* ===== Footer ===== */
footer{
    padding:40px 0; color:var(--muted); border-top:1px solid var(--edge); text-align:center;
}

/* ===== Focus ring (keyboard a11y) ===== */
a, button, .option, .btn{ outline: none; }
a:focus-visible, button:focus-visible, .option:focus-visible, .btn:focus-visible{
    box-shadow:0 0 0 4px var(--ring);
    border-radius:12px;
}





/* background section spacing */
#bg h2{ margin-bottom:1.2rem; }
#bg > #background { margin-top:0; padding-top:0; }
#bg > #background .grid{ margin-top:.25rem; }

/* 如果你的框架给 section 统一加了顶部间距，可以专门关掉这块 */
#bg > section{ margin-top:0; }


#bg .key { margin-bottom: 1.75rem; }
/* Tighten space between the H2 and the block below */
h2 + #background1 {            /* the <section id="background1"> right after the H2 */
    margin-top: .25rem;          /* was default (~1rem+) */
    padding-top: 0;
}

/* Make sure the grid itself doesn't add extra top margin */
#background1 .grid { margin-top: 0; }

/* If your global .lesson h2 has big bottom margin, override just for this heading */
h2 + #background1 { --_dummy:0 }            /* selector anchor */
h2 { margin-bottom: .4rem; }                 /* or: #bg h2 { margin-bottom:.4rem } if you want it scoped */

/* Safety: remove any top margin the first card might add */
#background1 .card:first-child { margin-top: 0; }







/* ===== Section: Materials & Methods + Results ===== */
.section-mm { margin-top: 1.25rem; }
.section-mm h2 { margin: 0 0 .5rem; }
.section-mm h3 { margin: .8rem 0 .35rem; }
.section-mm h4 { margin: .6rem 0 .25rem; }

.grid { display: grid; gap: 1rem; }
.grid.cols-2 { grid-template-columns: 1fr 1fr; }
.grid.gap-lg { gap: 1.25rem; }
.mt-xl { margin-top: 1.5rem; }

.media-card{
    background:#0b1220; border:1px solid #1e293b; border-radius:16px;
    padding:12px; box-shadow:0 8px 24px rgba(2,6,23,.35);
}
.media-frame{ position:relative; border-radius:12px; overflow:hidden; aspect-ratio:16/9; }
.media-img{ width:100%; height:100%; object-fit:cover; display:block; }
.media-cap{ color:#94a3b8; font-size:.86rem; line-height:1.5; margin:.5rem .2rem 0; }

.table-wrap{ margin:.5rem 0 0; }
.tbl{ width:100%; border-collapse:collapse; font-size:.95rem; background:#0b1220; color:#e5e7eb; }
.tbl caption{ text-align:left; color:#94a3b8; margin:.25rem 0 .35rem; font-size:.9rem; }
.tbl th,.tbl td{ border:1px solid #1e293b; padding:.5rem .6rem; text-align:center; }
.tbl thead th{ background:#0f172a; font-weight:700; }
.tbl tbody tr:nth-child(even){ background:#0e1527; }
.tbl .muted{ color:#9aa7b5; font-weight:400; font-size:.82rem; display:block; }
.table-note{ color:#9aa7b5; font-size:.85rem; margin:.35rem 0 0; }

.audio-row{ margin:.75rem 0 0; }
.code{
    font-family:ui-monospace, SFMono-Regular, Menlo, monospace;
    background:#0b1220; color:#e2e8f0; border-radius:.4rem; padding:.6rem .7rem; overflow-x:auto; font-size:.9rem;
}
.bq{ margin:.6rem 0; padding:.6rem .7rem; background:#fff7ed; color:#3b2f1a; border-left:3px solid #fb923c; border-radius:.4rem; }
.mini{ font-size:.95rem; color:#475569; }
@media (max-width: 900px){
    .grid.cols-2{ grid-template-columns: 1fr; }
}


img.img{
    width: 100%;
    height: auto !important;  /* 关键：自适应高度，保持原比例 */
    object-fit: contain;      /* 不裁剪，完整展示 */
    background: none;         /* 覆盖占位背景 */
    display: block;
    border-radius: 12px;      /* 可留可去 */
    border: 1px solid var(--edge); /* 可留可去 */
}



/* Quiz: selected state before submit */
.quiz .option.selected{
    border-color: var(--accent);
    box-shadow: 0 0 0 3px var(--ring);
}
.quiz-actions{ display:flex; gap:10px; margin-top:10px; }
#quiz-summary{ font-weight:600; margin-top:12px; }
#quiz-breakdown .ok{ color:var(--ok); }
#quiz-breakdown .bad{ color:var(--bad); }


/* 只作用在表格/长图 */
.media-card.is-table .media-frame{
    aspect-ratio: auto;         /* 不强制 16:9/21:9 */
    overflow: visible;          /* 不截断内容 */
}
.media-card.is-table .media-img{
    width: 100%;
    height: auto;               /* 按原比例自适应高度 */
    object-fit: contain;        /* 全图可见 */
    display: block;
}




/* —— 去掉黑底的媒体卡片 —— */
.media-card{
    background: var(--surface);          /* 或用 transparent 想完全透明 */
    border: 1px solid var(--edge);
    border-radius:16px;
    box-shadow: 0 6px 18px rgba(15,23,42,.06);
}
.media-card .media-frame{ background: transparent; }
.media-cap{ color: var(--muted); }

/* 表格图：保持原比例且无裁切 */
.media-card.is-table .media-frame{ aspect-ratio: auto; overflow: visible; }
.media-card.is-table .media-img{ width:100%; height:auto; object-fit: contain; display:block; }

/* —— 如果你的表格也变成黑底了，改回浅色 —— */
.tbl{
    width:100%;
    border-collapse: collapse;
    background:#fff;                 /* 浅色背景 */
    color: var(--ink);
}
.tbl th, .tbl td{ border:1px solid var(--edge); padding:.5rem .6rem; text-align:center; }
.tbl thead th{ background: linear-gradient(#fff,#fbfbff); color:#1f2937; font-weight:700; }
.tbl tbody tr:nth-child(even){ background:#fafcff; }

/* 只作用于 Quiz 页面，压缩上下留白 */
.page-quiz main section { padding: 18px 0 20px !important; }
.page-quiz h1 { margin: 0 0 .4rem; }
.page-quiz audio { margin: .25rem 0 .6rem; display:block; }
#quiz > p { margin: .2rem 0 .6rem; }
